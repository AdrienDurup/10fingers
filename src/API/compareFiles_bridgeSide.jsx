#target bridge;#include '../API/logFolder.jsx';#include '../API/toolbox.jsx';var debug={'1':false,'2':true};debugln('LAUNCHED IN BRIDGE',1);var theFile=new File(path);debugln(path,1);//OKvar t1=theFile.exists?true:false;debugln('theFile EXISTS = '+t1,1);//OKvar myThumb=new Thumbnail(theFile);debugln('MyThumb EXISTS = '+myThumb.exists,1);//OKdebugln(myThumb.metadata,1);//OKThumbnail.prototype.getFileSize = function(){var leng1=theFile.length;var leng2=0;        if(this.hasMetadata){                var MDstring=this.metadata.serialize();                leng2=MDstring.length;                debugln(MDstring,1);                debugln(MDstring.length,1);};                var truncatedSize=leng1+leng2;                debugln("OVERALL SIZE = "+leng1,1);//OK                return truncatedSize;                }            //========================Met à jour metadata du fichier========================function main(){    var resMD;//-----------------initialisation de la mise à jour------------------ //See for reference guide to XMPScript http://estk.aenhancers.com/10%20-%20Scripting%20Access%20to%20XMP%20Metadata/xmpscript-object-reference.html    if( xmpLib == undefined ) {		if( Folder.fs == "Windows" ){			var pathToLib = Folder.startup.fsName + "/AdobeXMPScript.dll";		} 		else {			var pathToLib = Folder.startup.fsName + "/AdobeXMPScript.framework";		};			var libfile = new File( pathToLib );		var xmpLib = new ExternalObject("lib:" + pathToLib );//$.writeln('xmpLib version = '+xmpLib.version);    };    app.synchronousMode=true;//$.writeln('SYNCHRONOUS MODE : '+app.synchronousMode);//------------------------------------------------------     //-------------------Met à jour fichier---------------             //$.writeln(myThumb.spec.exists);             //$.writeln(myThumb.spec instanceof File);               debugln(myThumb.spec,1);//OK         if(myThumb.spec.exists && myThumb.spec instanceof File){             //$.writeln(myThumb.references);             resMD=myThumb.getFileSize();              debugln('resMD = '+resMD,1);//OK                         // if(isUpdated){};         };//----------------------------------------------------------    xmpLib.unload();    return resMD;}//================================================================================================main();//See for reference guide to XMPScript http://estk.aenhancers.com/10%20-%20Scripting%20Access%20to%20XMP%20Metadata/xmpscript-object-reference.html